- content_for(:head) do
	!= stylesheet_tag "dashboard"

- content_for(:scripts) do
	!= javascript_tag "dashboard"
	:javascript
		mixpanel.alias("#{user.email}")

.container{"ng-controller" => "VersionsCtrl", "ng-init" => "init('" + appcast._id + "')"}
	.header
		%h3.text-muted=settings.appname
	%hr/
	.row
		.col-md-8
			.appcast
				%form.form-inline{:role => "form"}
					.form-group
						.input-group
							%span.input-group-addon AppCast Name
							%input.form-control{:type => "text", "ng-model" => "appcast.name", "ng-change" => "saveAppcast()"}

			%div{:action => "appcastUrl", "clear-on-complete" => "true", "drag-drop-upload" => "", "on-complete" => "uploadComplete(e, data)", "on-error" => "uploadError(e, data)", "on-progress" => "uploadProgress(progress, e, data)"}

			.versions
				.version.panel.panel-info{ "ng-repeat" => "version in appcast.items" }
					.panel-heading
						.pull-left
							.title {{version.title}}
							.versionString {{version.versionString}}
							.versionNumber {{version.versionNumber}}
						.pull-right
							%a{} Edit
						.clearfix
					.panel-body
						.desciption {{version.description | default: "No description available."}}
						.pull-left
							Published
							%time.pubDate.relative {{version.pubDate}}
							%span.draft {{version.draft}}
						.pull-right
							%span.size {{version.size | bytes}}
							%a.url{:href => "{{version.url}}"} Download
						.clearfix
				.empty.alert.alert-info{ "ng-show" => "!appcast.items || appcast.items.length == 0"}
					There are currently no versions defined for this appcast. Drag and drop your app here to add a new version.

		.col-md-4
			.panel.panel-info
				.panel-heading
					%h3.panel-title Step by step instructions
				.panel-body
					%p
						Hi, great to have you on board! To host you appcast all you need to do is follow this steps:
					%ol
						%li
							Download and bundle this special version of
							%a{:href => "http://github.com/pawelniewie/sparkle"} Sparkle
						%li
							Add it to your project
						%li
							Add this little helper to you build
						%li
							Before releasing run git tag -a version
						%li
							Build for Archiving
						%li
							Export the app (sign in with a Developer certificate)
						%li
							Run appcast upload with the app file
						%li
							Your appcast was updated and clients are getting the new version!
